{% extends 'layouts/admin_base.html' %}
{% block title %}
Admin Frontpage
{% endblock title %}
{% block content %}


<div class="container-fluid px-4">
    <h1 class="mt-4">Dashboard</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item active">Dashboard</li>
    </ol>
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="card bg-primary text-white mb-4">
                <div class="card-body">Events Management</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <a class="small text-white stretched-link" href="/admin/events">View Details</a>
                    <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card bg-warning text-white mb-4">
                <div class="card-body">Account Management</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <a class="small text-white stretched-link" href="/UserDetails">View Details</a>
                    <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card bg-success text-white mb-4">
                <div class="card-body">Product Management</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <a class="small text-white stretched-link" href="/admin/retrieveProduct">View Details</a>
                    <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card bg-info text-white mb-4">
                <div class="card-body">Rewards Management</div>
                <div class="card-footer d-flex align-items-center justify-content-between">
                    <a class="small text-white stretched-link" href="/admin/view_rewards">View Details</a>
                    <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    Number Of Events
                </div>
                <div class="card-body"><canvas id="myChart" width="100%" height="40"></canvas></div>
            </div>
        </div>
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    Total Product(s) Sold:
                </div>
                <div class="card-body">
                    <div class="chart-container" style="position: relative; height:100; width:100%">
                        <h1>{{ sold }}</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer class="py-4 bg-light mt-auto">
    <div class="container-fluid px-4">
        <div class="d-flex align-items-center justify-content-between small">
            <div class="text-muted">Copyright &copy; Your Website 2021</div>
            <div>
                <a href="#">Privacy Policy</a>
                &middot;
                <a href="#">Terms &amp; Conditions</a>
            </div>
        </div>
    </div>
</footer>

<script>
    let count = parseInt('{{ eventcount }}');
    var ctx = document.getElementById('myChart').getContext('2d');
    new Chart(ctx, {
        type: "bar",
        data: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "July", "Aug", "Sept", "Oct", "Nov", "Dec"],
            datasets: [{
                backgroundColor: ["red", "orange", "yellow", "green", "cyan", "blue", "pink", "violet", "magenta", "purple", "brown", "black"],
                data: ['{{ eventcount[0] }}',
                '{{ eventcount[1] }}',
                '{{ eventcount[2] }}',
                '{{ eventcount[3] }}',
                '{{ eventcount[4] }}',
                '{{ eventcount[5] }}',
                '{{ eventcount[6] }}',
                '{{ eventcount[7] }}',
                '{{ eventcount[8] }}',
                '{{ eventcount[9] }}',
                '{{ eventcount[10] }}',
                '{{ eventcount[11] }}']
            }]
        },
        options: {
            legend: { display: false },
            title: {
                display: true,
                text: "Event Calendar"
            }
        }
    });
    var ctx = document.getElementById("dChart");
    var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['OK', 'WARNING', 'CRITICAL', 'UNKNOWN'],
            datasets: [{
                label: '# of Tomatoes',
                data: [12, 19, 3, 5],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.5)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)'
                ],
                borderColor: [
                    'rgba(255,99,132,1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            //cutoutPercentage: 40,
            responsive: false,

        }
    });
</script>

{% endblock content %}