{% extends 'layouts/userbase.html' %}
{% from "/_formHelper.html" import render_field %}
{% block title %}
Account Details
{% endblock title %}
{% block content %}

<link rel="stylesheet" type="text/css" href="static/css/Account/Accountdetails.css">

<div id="Title">
    <h2>Change Email Address</h2>
    <hr>
</div>
<br>

<div id="Back">
    <a href="/AccountDetails">Back</a>
</div>

<div id="Form">
    <form method="post">

        <div>
            {{ render_field(form.Email , class="form-control" , id="email") }}
        </div>
        <div id="divsecond">
            {{ render_field(form.Code , class="form-control" , id="code" , onkeyup = "check()" , oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');") }}
            <button type="button" value="sent" onclick="Authenticate()" id="button" name="button" class="btn btn-outline-dark">Send Email Code</button>
        </div>
        <br>
        <div id="newemail">
            {{ render_field(form.NewEmail , class="form-control" , id="NewEmail") }}
            {% if existing == 'existing' %}
            <p>Email already existed</p>
            {% elif existing == 'admin' %}
            <p>That is not a valid email</p>
            {% endif %}
        </div>
        <br>
        <div>
            <input type="submit" value="Save changes" class="btn btn-outline-success" id="submit" onclick="savecodedata()"/>
        </div>

    </form>
</div>



<script type="text/javascript">
    var existing = {{ existing|tojson }};
</script>
<script src="/static/js/user/ChangeEmail.js" type="text/javascript"></script>
{% endblock %}



{% block footer %}
{% endblock footer %}


